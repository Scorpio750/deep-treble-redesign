<!DOCTYPE html>
<html>
  <head>
    <title>Deep Treble, Rutgers Coed A Capella Group</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="main.css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
    <script src="third_party/mustache.js"></script>
  </head>
  <body>

    <!-- Wrap the contents of the page so that if the page is shorter than the height of the browser, it will let the footer stick to the bottom. -->
    <div class='wrap'>

      <!-- Include the header of the website, which is shared throughout. -->
      <header></header>

      <!-- The glow and white fill of the content of the page -->
      <div class='container'>
        <div id="actualContent" class="whitefill blackglow">
          <center><h2><span class='text-danger'>Deep Treble</span> Homepage Admin Page</h2></center>
          <center><p>Write below in HTML!</p></center>
          <div class='whitespace'></div>
          <div class="form-horizontal" role="form">
            <div class="form-group">
              <label for="inputPassword" class="col-sm-2 control-label">Password</label>
              <div class="col-sm-10">
                <input type="password" class="form-control" id="inputPassword" placeholder="Password">
              </div>
            </div>

            <textarea id="appendHere"  class="form-control" rows="10"></textarea>

            <div class="whitespace"></div>
            <input id="saveButton" type=submit class="btn btn-default" value="Save">

          </div>
        </div>
      </div>
      <div id='push'></div>
    </div>
    <footer></footer>
    <script type="text/javascript">

      $(document).ready(function() {
        'use strict';

        // Render our headers and footers.
        $.get('header.html', function(data) {
          $('header').html(data);
        });
        $.get('footer.html', function(data) {
          $('footer').html(data);
        });

        var view = {
        };

        $.get('data/homepage.html', function(data) {
          document.body.querySelector('#appendHere').value = data;



          // Setup save button.
          var save = document.body.querySelector('#saveButton');
          save.addEventListener('click', function() {

            // Create data to be sent to the server.
            var formData = new FormData();

            formData.append('data', document.body.querySelector('#appendHere').value);
            formData.append('password', document.body.querySelector('#inputPassword').value);

            // Send to server.
            var req = new XMLHttpRequest();
            req.open('POST', 'update_index.php');
            req.onload = function(event) { alert(event.target.responseText); };
            req.send(formData);
          });
        });
      });
    </script>
    <script src="js/main.js"></script>
  </body>
</html>
