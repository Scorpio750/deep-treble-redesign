<!DOCTYPE html>
<html>
  <head>
    <title>Deep Treble A Cappella</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="main.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
    <script src="third_party/mustache.js"></script>
  </head>
  <body>

    <!-- Wrap the contents of the page so that if the page is shorter than the height of the browser, it will let the footer stick to the bottom. -->
    <div class='wrap'>

      <!-- Include the header of the website, which is shared throughout. -->
      <header></header>

      <!-- The glow and white fill of the content of the page -->
      <div class='container'>
        <div id="actualContent" class="whitefill blackglow">

          <!-- The image slider, takes files from server and serves them up in order -->
          <script id="carousel" type="text/html">
            <div id="myCarousel" class="carousel slide">
              <ol class='carousel-indicators'>
                {{#images}}
                  <li data-target="#myCarousel" data-slide-to="{{index}}" class="{{#activeIfFirst}}{{index}}{{/activeIfFirst}}"></li>
                {{/images}}
              </ol>
              <div class="carousel-inner">
                {{#images}}
                  <div class="item {{#activeIfFirst}}{{index}}{{/activeIfFirst}}">
                    <a href="{{url}}" style="text-align:center;">
                      <img style="border:0;" class="banner" src="images/slider/{{index}}"/>
                    </a>
                  </div>
                {{/images}}
              </div>
              <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                <span class="glyphicon glyphicon-chevron-left"></span>
              </a>
              <a class="right carousel-control" href="#myCarousel" data-slide="next">
                <span class="glyphicon glyphicon-chevron-right"></span>
              </a>
            </div>
          </script>

          <div class='row'>

            <!-- Twitter bar -->
            <div class='col-sm-4'><br>
              <a class="twitter-timeline" href="https://twitter.com/DeepTreble" data-widget-id="400697437305569281" data-tweet-limit="3">Tweets by @DeepTreble</a>
              <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
            </div>

            <!-- Main content -->
            <div class='col-sm-8'>
              <center><h2><span class='text-danger'>Deep Treble</span> Homepage</h2></center>
              <div id="appendIntroHere"></div>
            </div>
          </div>
        </div>
      </div>
      <div id='push'></div>
    </div>
    <footer></footer>
    <script type="text/javascript">
      $(document).ready(function() {
        'use strict';

        // Render our headers and footers.
        $.get('header.html', function(data) {
          $('header').html(data);
        });
        $.get('footer.html', function(data) {
          $('footer').html(data);
        });

        
        var view = {

          /** Helper function to set the first carousel image as "active" */
          activeIfFirst: function() {
            return function(text, render) {
              return render(text) === '0' ? 'active' : '';
            }
          },
        };

        $.getJSON('data/carousel.json', function(data) {

          // Add carousel to the "view"
          view.images = data;

          // Render view
          var template = $('#carousel').html();
          var rendered = Mustache.render(template, view);
          $('#actualContent').prepend(rendered);
        });

        $.get('data/homepage.html', function(data) {
          $('#appendIntroHere').html(data);
        });
      });
    </script>

    <!-- Include script that makes background fade -->
    <script src="js/background.js"></script>
  </body>
</html>
